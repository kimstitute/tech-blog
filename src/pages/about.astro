---
import ThreeColumnLayout from '@layouts/ThreeColumnLayout.astro';
import { getCollection } from 'astro:content';
import { formatPageTitle, getSiteConfig, getSocialConfig } from '@utils/config';
import { createPath } from '@utils/config';

// Get all blog posts and projects to extract existing tags
const allPosts = await getCollection('blog');
const allProjects = await getCollection('projects');

// Extract all existing tags
const blogTags = [...new Set(allPosts.flatMap(post => post.data.tags || []))];
const projectTags = [...new Set(allProjects.flatMap(project => project.data.tags || []))];
const existingTags = [...new Set([...blogTags, ...projectTags])].map(tag => tag.toLowerCase());

// Function to check if a skill has a matching tag
function hasMatchingTag(skill) {
  const normalizedSkill = skill.toLowerCase().replace(/\s+/g, '-');
  return existingTags.includes(normalizedSkill) || existingTags.includes(skill.toLowerCase());
}

// Function to create a tag URL
function getTagUrl(skill) {
  const normalizedSkill = skill.toLowerCase().replace(/\s+/g, '-');
  return createPath(`/tags/${normalizedSkill}`);
}

// Technical skills grouped by category (김민상 프로필에 맞게 업데이트)
const skillsData = [
  {
    category: "Programming Languages",
    skills: ["Python", "Java", "Kotlin", "C/C++", "JavaScript", "SQL", "Lua"]
  },
  {
    category: "Frameworks/Libraries",
    skills: ["PyTorch", "Transformers", "LangChain", "FastAPI", "Flask", "React"]
  },
  {
    category: "Databases",
    skills: ["Pinecone", "Oracle", "Firestore", "MySQL"]
  },
  {
    category: "Middleware",
    skills: ["WebSocket", "gRPC", "Nginx"]
  },
  {
    category: "Tools/Platforms",
    skills: ["AWS EC2", "Docker", "GitHub Actions", "Android Studio", "Ollama"]
  },
  {
    category: "Architecture/Methodologies",
    skills: ["RAG", "SFT/RFT(PPO·RLAIF)", "MLOps(Basic)", "CI/CD", "Microservices"]
  },
  {
    category: "AI/ML & RL",
    skills: ["Whisper", "Wav2Vec2.0", "EfficientNet", "KoBERT", "Q-learning", "A2C", "REINFORCE"]
  },
  {
    category: "On-device",
    skills: ["QNN(Llama 3.2 3B)", "Galaxy S25", "Android Foreground Service", "Room DB"]
  }
];

const siteConfig = getSiteConfig();
const socialConfig = getSocialConfig();
---

<ThreeColumnLayout title={formatPageTitle('About')}>
  <header class="pb-8 border-b border-slate-200 dark:border-slate-800 mb-8">
    <h1 class="text-4xl font-bold mb-4">About Me</h1>
  </header>
  
  <div class="prose dark:prose-invert prose-lg max-w-none">
    <p>
      안녕하세요. 한성대학교 AI응용학과 학부생 김민상입니다. 이 블로그는 제가 진행하는 SW·AI 프로젝트와 학습 기록, 산학연계 경험을 정리해 공유하는 공간입니다.
      주 관심사는 LLM/RAG, 강화학습 기반 퀀트, 음성/비전 파이프라인, 온디바이스 추론, 그리고 백엔드 실시간 스트리밍 시스템입니다.
    </p>
    
    <h2>Personal Profile</h2>
    <p>
      학부에서 캡스톤디자인과 산학공동 프로젝트를 중심으로 실전형 AI·백엔드 역량을 쌓고 있습니다.
      Qualcomm 연계 온디바이스 AI, 응급의학 특화 LLM 챗봇, RL·AI 퀀트 리서치, 딥보이스/보이스피싱 탐지 앱, 학내 공유형 LLM 웹앱, 유튜브 요약 확장 등
      다양한 도메인의 프로젝트를 실제로 설계·구현·배포하며 재현 가능한 실험과 로그 기반 리포팅을 꾸준히 실천하고 있습니다.
    </p>
    
    <h2>Technical Skills</h2>
    <ul>
      {skillsData.map(category => (
        <li>
          <strong>{category.category}</strong>: 
          {category.skills.map((skill, index) => (
            <>
              {hasMatchingTag(skill) ? (
                <a href={getTagUrl(skill)} class="text-indigo-600 dark:text-indigo-400 hover:underline">{skill}</a>
              ) : (
                <span>{skill}</span>
              )}
              {index < category.skills.length - 1 && (skill === "Java" ? " (core), " : ", ")}
            </>
          ))}
        </li>
      ))}
    </ul>
    
    <h2>Work Experience</h2>
    <h3>학부 산학·캡스톤 프로젝트 | 팀/파트 리드 | 2024–Present</h3>
    <p>
      기업·연계 과제를 중심으로 LLM/RAG, RL·퀀트, 음성/비전, 온디바이스 추론을 결합한 애플리케이션을 설계·구현했습니다.
      FastAPI/Flask 기반 마이크로서비스, WebSocket 실시간 스트리밍, AWS EC2 배포, GitHub Actions 간단 CI/CD를 운영하며
      로그·메트릭과 체크리스트를 통한 재현성과 품질을 관리했습니다.
    </p>
    
    <h2>Project Experience</h2>
    <ul>
      <li><strong>딥보이스·보이스피싱 탐지 모바일 앱</strong>: Wav2Vec2.0·Whisper 파이프라인, 통화 녹음 실시간 처리, RAG 기반 위험도 판단, QNN(Llama 3.2 3B) 온디바이스 탑재</li>
      <li><strong>응급의학 LLM 프레임워크</strong>: GPT-3.5 SFT + 웹 RAG 구성, Streamlit 배포로 의료 특화 질의응답 챗봇 구현</li>
      <li><strong>감정 인식 대화 에이전트</strong>: EfficientNet 얼굴 감정 분류, RoBERTa 보상모델, GPT-2 RFT(PPO·RLAIF)로 감정 고려 답변 최적화</li>
      <li><strong>RL·AI 퀀트 리서치</strong>: Q-learning/A2C/REINFORCE 실험 자동화, 실시간 데이터 파이프라인 및 리포트 자동 생성</li>
      <li><strong>학내 공유형 LLM 웹앱(hsgpt)</strong>: 접근 제어·요약/검색·로그 체계 구축</li>
      <li><strong>유튜브 요약 확장</strong>: 자막 파싱–핵심 구간 요약–플레이어 연동(자동 재생) 워크플로우 구현</li>
    </ul>
    
    <h2>Education</h2>
    <p>
      Hansung University | B.S. in AI Applications (In Progress)
    </p>
    <ul>
      <li>주요 과목: 인공지능, 머신러닝, 컴퓨터비전, 자연어처리, 운영체제, 데이터베이스, 소프트웨어 공학</li>
      <li>캡스톤/산학: Qualcomm 연계 온디바이스 AI, RL·AI 퀀트, 의료 LLM/RAG, 보안 앱 개발</li>
    </ul>
    
    <h2>Contact Information</h2>
    <ul>
      <li><a href={socialConfig.github} target="_blank" rel="noopener noreferrer">GitHub</a></li>
      <li><a href={socialConfig.linkedin} target="_blank" rel="noopener noreferrer">LinkedIn</a></li>
      <li class="relative group">
        <span class="cursor-pointer text-indigo-600 dark:text-indigo-400">WeChat</span>
        <div class="absolute left-20 top-0 -mt-64 opacity-0 group-hover:opacity-100 transition-opacity invisible group-hover:visible z-10">
          <img src="/wechat.png" alt="WeChat QR Code" class="w-64 h-64 border-2 border-slate-200 dark:border-slate-700 rounded-lg bg-white shadow-lg" />
        </div>
      </li>
      <li>Email: <a href={`mailto:${siteConfig.email}`}>{siteConfig.email}</a></li>
    </ul>
    
    <p>
      방문해 주셔서 감사합니다. 프로젝트와 글은 계속해서 업데이트합니다.
    </p>
  </div>
</ThreeColumnLayout>
